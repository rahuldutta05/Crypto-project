/* ─── Reset & Base ─────────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:         #0f1117;
  --surface:    #1a1d27;
  --surface2:   #22263a;
  --border:     #2e3250;
  --accent:     #6c63ff;
  --accent-dim: #3d3880;
  --green:      #22c55e;
  --red:        #ef4444;
  --yellow:     #f59e0b;
  --text:       #e2e8f0;
  --text-dim:   #8892b0;
  --radius:     10px;
  --font:       'Inter', system-ui, sans-serif;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font);
  font-size: 15px;
  line-height: 1.6;
  min-height: 100vh;
}

/* ─── Layout ────────────────────────────────────────────────────────────────── */
.app-layout { display: flex; flex-direction: column; min-height: 100vh; }

.navbar {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  padding: 0.75rem 1.5rem;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap;
}

.nav-brand { font-weight: 700; font-size: 1.1rem; color: var(--accent); white-space: nowrap; }

.nav-links { display: flex; gap: 0.25rem; flex-wrap: wrap; }

.nav-link {
  padding: 0.35rem 0.75rem;
  border-radius: 6px;
  color: var(--text-dim);
  text-decoration: none;
  font-size: 0.875rem;
  transition: background 0.15s, color 0.15s;
}
.nav-link:hover  { background: var(--surface2); color: var(--text); }
.nav-link.active { background: var(--accent-dim); color: var(--accent); }

.main-content { flex: 1; padding: 2rem 1.5rem; max-width: 860px; margin: 0 auto; width: 100%; }

/* ─── Card ──────────────────────────────────────────────────────────────────── */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.75rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.card h2 { font-size: 1.35rem; font-weight: 700; }
.card h3 { font-size: 1.05rem; font-weight: 600; color: var(--text-dim); }

.subtitle { color: var(--text-dim); font-size: 0.9rem; }

/* ─── Form elements ─────────────────────────────────────────────────────────── */
.form-group { display: flex; flex-direction: column; gap: 0.35rem; }
.form-group label { font-size: 0.85rem; color: var(--text-dim); font-weight: 500; }

.input-field, .message-input {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 0.6rem 0.85rem;
  color: var(--text);
  font-family: inherit;
  font-size: 0.95rem;
  width: 100%;
  transition: border-color 0.15s;
  resize: vertical;
}
.input-field:focus, .message-input:focus {
  outline: none;
  border-color: var(--accent);
}

/* ─── Buttons ───────────────────────────────────────────────────────────────── */
.btn-primary, .btn-secondary, .btn-danger {
  padding: 0.55rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: opacity 0.15s, transform 0.1s;
  align-self: flex-start;
}
.btn-primary  { background: var(--accent); color: #fff; }
.btn-secondary{ background: var(--surface2); color: var(--text); border: 1px solid var(--border); }
.btn-danger   { background: var(--red); color: #fff; }

.btn-primary:hover, .btn-secondary:hover, .btn-danger:hover { opacity: 0.85; }
.btn-primary:disabled, .btn-secondary:disabled { opacity: 0.45; cursor: not-allowed; }

/* ─── Feedback ──────────────────────────────────────────────────────────────── */
.error-banner {
  background: rgba(239, 68, 68, 0.12);
  border: 1px solid var(--red);
  border-radius: 6px;
  padding: 0.6rem 0.85rem;
  color: var(--red);
  font-size: 0.9rem;
}

.result-box {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  font-size: 0.9rem;
}
.result-box.success { border-color: var(--green); }
.result-box code { color: var(--accent); font-size: 0.85rem; }

.hint { color: var(--text-dim); font-size: 0.85rem; }

/* ─── Identity status (Send page) ───────────────────────────────────────────── */
.identity-status {
  padding: 0.6rem 1rem;
  border-radius: 6px;
  font-size: 0.875rem;
  background: var(--surface2);
  border: 1px solid var(--border);
}
.identity-status.ready { border-color: var(--green); color: var(--green); }
.identity-status.pending { color: var(--yellow); }

.commitment-preview { color: var(--text-dim); font-family: monospace; }
.pow-progress { color: var(--text-dim); }

/* ─── Status badge ──────────────────────────────────────────────────────────── */
.status-badge {
  padding: 0.2rem 0.55rem;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}
.status-badge.active  { background: rgba(34,197,94,0.15); color: var(--green); }
.status-badge.expired { background: rgba(239,68,68,0.15); color: var(--red); }

/* ─── Message list (Inbox) ──────────────────────────────────────────────────── */
.inbox-controls { display: flex; gap: 0.75rem; align-items: center; }
.inbox-controls .input-field { flex: 1; }

.message-list { display: flex; flex-direction: column; gap: 0.75rem; }

.message-card {
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 1rem;
  background: var(--surface2);
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}
.message-card.expired { opacity: 0.65; border-color: var(--red); }

.message-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.85rem;
  flex-wrap: wrap;
}
.msg-id { color: var(--text-dim); }
.expiry { color: var(--text-dim); margin-left: auto; }

.expired-notice { color: var(--red); font-size: 0.875rem; }
.decrypted-content {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 0.6rem;
  font-size: 0.9rem;
  white-space: pre-wrap;
}

.empty-state { color: var(--text-dim); text-align: center; padding: 2rem 0; }

/* ─── Tabs (Verify page) ─────────────────────────────────────────────────────── */
.tab-bar { display: flex; gap: 0.5rem; flex-wrap: wrap; }

.tab {
  padding: 0.4rem 0.9rem;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--surface2);
  color: var(--text-dim);
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.15s;
}
.tab.active { background: var(--accent-dim); color: var(--accent); border-color: var(--accent); }
.tab:hover:not(.active) { background: var(--surface2); color: var(--text); }

.hash { font-family: monospace; font-size: 0.82rem; color: var(--accent); word-break: break-all; }
.ok { color: var(--green); }
.no { color: var(--red); }

/* ─── Attacker / Sniffer ────────────────────────────────────────────────────── */
.scenario-grid { display: flex; flex-direction: column; gap: 0.5rem; }

.scenario-card {
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 0.75rem 1rem;
  cursor: pointer;
  transition: border-color 0.15s;
  background: var(--surface2);
}
.scenario-card:hover { border-color: var(--accent); }
.scenario-card.open { border-color: var(--red); }

.scenario-label { font-weight: 600; font-size: 0.9rem; }
.scenario-detail { margin-top: 0.75rem; display: flex; flex-direction: column; gap: 0.4rem; }
.scenario-desc { color: var(--text-dim); font-size: 0.875rem; }
.scenario-result { color: var(--green); font-size: 0.875rem; background: rgba(34,197,94,0.07); padding: 0.5rem; border-radius: 4px; }

.packet-list { display: flex; flex-direction: column; gap: 0.35rem; }

.packet-row {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.6rem 0.85rem;
  border: 1px solid var(--border);
  border-radius: 6px;
  cursor: pointer;
  background: var(--surface2);
  font-size: 0.875rem;
  transition: border-color 0.15s;
}
.packet-row:hover { border-color: var(--accent-dim); }
.packet-row.selected { border-color: var(--accent); }

.pkt-dir { color: var(--text-dim); white-space: nowrap; }
.pkt-endpoint { color: var(--accent); font-size: 0.82rem; }

.packet-detail {
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 1rem;
  background: var(--surface2);
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}
.pkt-direction-badge {
  font-size: 0.75rem;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}
.analysis-box {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 0.65rem;
  font-size: 0.875rem;
  color: var(--yellow);
}

.json-dump {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 0.75rem;
  font-size: 0.8rem;
  overflow-x: auto;
  color: var(--text-dim);
  white-space: pre;
}

.sniff-result { display: flex; flex-direction: column; gap: 0.5rem; }

.row { display: flex; gap: 0.75rem; align-items: center; }
.row .input-field { flex: 1; }

/* ─── Key preview ──────────────────────────────────────────────────────────── */
.key-preview {
  font-size: 0.75rem;
  color: var(--text-dim);
  white-space: pre-wrap;
  word-break: break-all;
  background: var(--bg);
  padding: 0.5rem;
  border-radius: 4px;
  max-height: 180px;
  overflow-y: auto;
}

hr { border: none; border-top: 1px solid var(--border); }
